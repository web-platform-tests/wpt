<!DOCTYPE html>
<meta charset="utf-8">
<title>WebStorage Test: localStorage - destory top-level browsing context</title>
<link rel="author" title="Intel" href="http://www.intel.com">
<link rel="help" href="https://w3c.github.io/webstorage/#the-localstorage-attribute">
<meta name="assert" content="When a top-level browsing context is destroyed,
                             the data stored in its local storage areas will 
                             be keeped.">
<body onload="loadLocalStorage()">
  <span id="value" style="font-weight: bold;"></span>
  <p>local storage data</P>
  <input type="text" id="data">
  <input type="button" id="save" value="save"  onclick="saveLocalStorage()">
  <ol>
    <li>
      Input value of the textbox, click 'Save' button.
    </li>
    <li>
      If the value after 'your local storage data: ' 
      doesn't equal the input value, it stores fail.
    </li>
    <li>Close the page and reopen it.</li>
    <li>
      If the value after 'your local storage data: ' equals the input value before,
      it should be passed, otherwise it fail.
    </li>
  </ol>
  <script>
    var storage = window.localStorage;
    var keyName = "storageKey";

    function loadLocalStorage() {
      var storageValue = document.getElementById("value");
      storageValue.innerHTML = "your local storage data: " + storage.getItem(keyName);
    }

    function saveLocalStorage() {
      var storageData = document.getElementById("data");
      storage.setItem(keyName, storageData.value);
      loadLocalStorage();
    }
  </script>
</body>

