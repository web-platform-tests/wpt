<!DOCTYPE html>
<title>Both focusable and unfocusable custom elements can show validation bubbles</title>
<link rel=help href=https://html.spec.whatwg.org/C/#report-validity-steps>
<style>
body { margin-top: 50px; }
</style>
<focusable-custom-element></focusable-custom-element>
<script>
class FocusableCustomElement extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({mode: 'open'});
    this.shadowRoot.innerHTML = '<input>';
    this.elementInternals = this.attachInternals();
    const validationAnchor = this.shadowRoot.querySelector('input');
    this.elementInternals.setValidity({valueMissing: true}, 'value missing', validationAnchor);
    this.shadowRoot.firstChild.focus();
  }

  static get formAssociated() {
    return true;
  }

  reportValidity() {
    this.elementInternals.reportValidity();
  }
}

customElements.define('focusable-custom-element', FocusableCustomElement);
</script>
