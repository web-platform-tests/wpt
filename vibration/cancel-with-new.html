<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' lang='en'>
  <head>
    <meta charset='utf-8'/>
    <title>Vibration API: cancel ongoing vibrate() with a new call to vibrate</title>
    <link rel='author' title='Robin Berjon' href='mailto:robin@berjon.com'/>
    <link rel='help' href='http://www.w3.org/TR/vibration/#methods'/>
    <meta name='flags' content='vendor-prefix, dom, interact'/>
    <meta name='assert' content='Cancel the pre-existing instance of the processing vibration patterns algorithm, if any.'/>
    <!-- 
      When you review this test, please add
      <link rel='reviewer' title='Your Name' href='mailto:your-email-address'/>
    -->
    <link rel='stylesheet' href='/resources/testharness.css' media='all'/>
  </head>
  <body>
    <h1>Description</h1>
    <p>
      After hitting the button below, your device must vibrate continuously for a short period of time (roughly one
      second), then vibrate a series of short bursts. If the initial continuously vibration is longer (roughly five
      seconds, it should feel somewhat long) or if there is no series of short vibration bursts then the test has
      failed.
    </p>
    <button id='vib'>Vibrate!</button>
    <div id='log'></div>
    <script src='/resources/testharness.js'></script>
    <!-- When this test gets approved, remove a "../" below -->
    <script src='support/feature-detection.js'></script>
    <script src='support/helpers.js'></script>
    <script>
      if (supportsVibration()) {
          document.getElementById("vib").onclick = function () {
              navigator.vibrate(5000);
              setTimeout(function () {
                  navigator.vibrate([200, 200, 200, 200, 200, 200, 200, 200, 200]);
              }, 1000);
          };
      }
    </script>
  </body>
</html>
