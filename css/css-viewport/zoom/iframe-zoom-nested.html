<!DOCTYPE html>
<html class="reftest-wait">
<head>
<title>nested iframes with CSS zoom</title>
<link rel="author" title="Yotam Hacohen" href="mailto:yotha@chromium.org">
<link rel="author" title="Stefan Zager" href="mailto:szager@chromium.org">
<link rel="author" title="Google" href="http://www.google.com/">
<link href="reference/iframe-zoom-nested-ref.html" rel="match">
<link rel="help" href="https://drafts.csswg.org/css-viewport/">
<script src="/common/reftest-wait.js"></script>

<style>
body {
  columns: 2;
  --iframe-width: 256px;
  --iframe-height: 128px;
}
iframe {
  border: none;
  width: var(--iframe-width);
  height: var(--iframe-height);
}
.zoom {
  zoom: 1.5;
}
</style>
</head>

<body>
<script>
const totalLeafIframes = 4;
let loadedcount = 0;
addEventListener("message", ({ data }) => {
  // We need to wait for the nested iframe (leaf.html) to load, in addition
  // to the top-level iframe (nested-iframe.html).
  if (data != "leaf_loaded") return;

  loadedCount += 1;
  if (loadedCount == totalLeafIframes) {
    takeScreenshot();
  }
});
</script>
<iframe id="baseline" src="resources/nested-iframe.html" scrolling="no"></iframe>
<iframe id="zoom-child" src="resources/nested-iframe.html?zoom=2" scrolling="no"></iframe>
<iframe id="zoom-top" class="zoom" src="resources/nested-iframe.html" scrolling="no"></iframe>
<iframe id="zoom-top-child" class="zoom" src="resources/nested-iframe.html?zoom=2" scrolling="no"></iframe>
