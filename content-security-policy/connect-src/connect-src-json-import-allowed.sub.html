<!DOCTYPE html>
<html>
  <head>
    <title>connect-src-json-import-allowed</title>
    <meta
      http-equiv="Content-Security-Policy"
      content="connect-src 'self' http://{{host}}:{{ports[http][0]}}; script-src 'self' 'unsafe-inline';"
    />
    <script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script>
  </head>

  <body>
    <script>
      promise_test(async (t) => {
        window.addEventListener(
          "securitypolicyviolation",
          t.unreached_func("No security policy violation should be raised.")
        );
        return import("/common/dummy.json", { with: { type: "json" } });
      }, "import should be allowed");
    </script>
  </body>
</html>
