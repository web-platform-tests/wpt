<!DOCTYPE html>
%(generated_disclaimer)s
<!-- TODO(kristijanburnik): Create a template for automated tests:
http://testthewebforward.org/docs/test-templates.html#script-test-with-metadata
-->
<html>
  <head>
    <title>Referrer-Policy: %(spec_title)s</title>
    <meta name="description" content="%(spec_description)s">
    %(meta_delivery_method)s
    <script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script>
    <!-- Common global functions for referrer-policy tests. -->
    <script src="/referrer-policy/generic/common.js"></script>
    <!-- The original specification JSON for validating the scenario. -->
    <script src="/referrer-policy/spec_json.js"></script>
    <!-- Simple wrapper API for all referrer-policy test cases. -->
    <script src="/referrer-policy/generic/referrer-policy-test-case.js?pipe=sub"></script>
  </head>
  <body>
    <h1>%(spec_title)s</h1>
    <h2>%(spec_description)s</h2>

    <p id="description">The referrer URL is %(referrer_url)s when a document
      served over %(source_protocol)s requires an %(target_protocol)s
      sub-resource via %(subresource)s using the %(delivery_method)s delivery
      method and when the target request is %(origin)s.</p>

    <p>See <a href="%(spec_specification_url)s" target="_blank">specification</a>
       details for this test.</p>

    <h3>Scenario outline</h3>
    <table>
      <tbody>
        <tr>
          <th>Delivery method</th>
          <td>%(delivery_method)s</td></tr>
        <tr>
          <th>Origin transition</th>
          <td>%(origin)s</td></tr>
        <tr>
          <th>Protocol transition</th>
          <td>from %(source_protocol)s to %(target_protocol)s</td></tr>
        <tr>
          <th>Subresource type</th>
          <td>%(subresource)s</td></tr>
        <tr>
          <td colspan="2"><hr></td>
        </tr>
        <tr>
          <th>Expected result</th>
          <td>Referrer URL should be <strong>%(referrer_url)s</strong></td>
        </tr>
      <tbody>
    </table>

    <script>
      var scenario = {
        "referrer_policy": %(referrer_policy_json)s,
        "delivery_method": "%(delivery_method)s",
        "origin": "%(origin)s",
        "source_protocol": "%(source_protocol)s",
        "target_protocol": "%(target_protocol)s",
        "subresource": "%(subresource)s",
        "referrer_url": "%(referrer_url)s"
      };
      var description = document.getElementById("description").innerHTML;
      ReferrerPolicyTestCase(scenario, description).start();
    </script>

    <div id="log"></div>
  </body>
</html>
