<!doctype html>
<!-- Tests that embedded credentials are removed when invoking a custom
  protocol handler registered via registerProtocolHandler. -->
<meta charset=windows-1254>
<meta name=timeout content=long>
<title>registerProtocolHandler() and a handler with %s in the path</title>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<script src=/service-workers/service-worker/resources/test-helpers.sub.js></script>
<script>

// Configure expectations for individual test
window.type = "path";
window.noSW = false;
window.scheme = 'ftp';

function runCredentialstest() {
  runTest({
    credentialsPart: "username:password",
    hostPart: "hostname.example"
  });
}
</script>
<script src=resources/handler-tools.js></script>
<ol>
 <li><p>First, register the handler: <button onclick='register()'>Register</button>.
 <li><p>Then, run the test: <button onclick='runCredentialstest()'>Run</button>.
</ol>
<div id=log></div>
