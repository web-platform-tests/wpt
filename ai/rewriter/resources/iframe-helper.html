<!DOCTYPE HTML>
<meta charset="utf-8">
<script>
window.onmessage = async message => {
  switch (message.data.type) {
    case 'RewriterCreate':
      Rewriter.create()
        .then(t => parent.postMessage('Success', '*'))
        .catch(err => parent.postMessage('Failure: ' + err.name, '*'));
      break;
    case 'RewriterAvailability':
        Rewriter.availability()
        .then(availability => parent.postMessage(availability, '*'))
        .catch(err => parent.postMessage('Failure: ' + err.name, '*'));
      break;
  };
};
</script>
