<!DOCTYPE html>
<link rel="help" content="https://html.spec.whatwg.org/C/#dom-elementinternals-focusbehavior">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<body>
<script>
class MyElement extends HTMLElement {
  constructor() {
    super();
    this.i = this.attachInternals();
  }
}
customElements.define('my-element', MyElement);

test(() => {
  const element = document.createElement('my-element');
  assert_equals(element.i.focusBehavior, 'default');
  document.body.appendChild(element);
  element.focus();
  assert_not_equals(document.activeElement, element);
}, 'Behavior without setting focusBehavior');

test(() => {
  const element = document.createElement('my-element');
  element.i.focusBehavior = 'default';
  assert_equals(element.i.focusBehavior, 'default');
  document.body.appendChild(element);
  element.focus();
  assert_not_equals(document.activeElement, element);
}, 'Behavior with focusBehavior="default"');

test(() => {
  const element = document.createElement('my-element');
  element.i.focusBehavior = 'default';
  assert_equals(element.i.focusBehavior, 'default');
  element.tabIndex = 0;
  document.body.appendChild(element);
  element.focus();
  assert_equals(document.activeElement, element);
}, 'Tabindex overrides focusBehavior="default"');

test(() => {
  const element = document.createElement('my-element');
  element.i.focusBehavior = 'focusable';
  assert_equals(element.i.focusBehavior, 'focusable');
  document.body.appendChild(element);
  element.focus();
  assert_equals(document.activeElement, element);
}, 'Behavior with focusBehavior="focusable"');

test(() => {
  const element = document.createElement('my-element');
  element.i.focusBehavior = 'simple-control';
  assert_equals(element.i.focusBehavior, 'simple-control');
  document.body.appendChild(element);
  element.focus();
  assert_equals(document.activeElement, element);
}, 'Behavior with focusBehavior="simple-control"');

test(() => {
  const element = document.createElement('my-element');
  element.i.focusBehavior = 'anchor';
  assert_equals(element.i.focusBehavior, 'focusable');
  document.body.appendChild(element);
  element.focus();
  assert_equals(document.activeElement, element);
}, 'Behavior with focusBehavior=<unknown keyword>');
</script>
</body>

