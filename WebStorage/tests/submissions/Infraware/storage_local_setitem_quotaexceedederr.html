<!DOCTYPE HTML>
<html>
 <head>
  <title>Web Storage</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
 </head>
 <body>
	<p>
		<h3>storage_local_setItem_QUOTA_EXCEEDED_ERR</h3>
	</p>
	
	<hr>

	<div id="log"></div>

	<script>

		if (('localStorage' in window) && window.localStorage !== null){
			localStorage.clear();

			var index = 0;
			var key = "name";
			var val = "user";

			try {
				while (true)
				{
					index++;
					localStorage.setItem("" + key + index, "" + name + index);
				}
			} catch (e) {
				if (e.code == e["QUOTA_EXCEEDED_ERR"]) {
					test(function() {
						assert_true(true);
					}, "QUOTA_EXCEEDED_ERR error test")
				} else {
					test(function() {
						assert_unreached("QUOTA_EXCEEDED_ERR error did not raised.");
					}, "QUOTA_EXCEEDED_ERR error test")
				}
			}

			localStorage.clear();
		} else {
			fail("localStorage is not supported.");
		}	
	</script>

 </body>
</html>