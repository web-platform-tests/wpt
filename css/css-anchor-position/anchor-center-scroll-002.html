<!DOCTYPE html>
<html class=reftest-wait>
<title>CSS Anchor Positioning Test: anchor-center after scroll</title>
<link rel="help" href="https://drafts.csswg.org/css-anchor-1/#anchor-center">
<link rel="author" href="mailto:dshin@mozilla.com">
<link rel="match" href="../reference/ref-filled-green-100px-square.xht">
<style>
.abs-cb {
  width: 100px;
  height: 100px;
  position: relative;
  background: red;
}

.scroller {
  overflow: scroll;
  scrollbar-width: none;
  width: 100%;
  height: 100%;
}

.content {
  display: grid;
  align-items: end;
  justify-items: end;
  width: 200px;
  height: 200px;
}

.anchor {
  anchor-name: --a;
  background: red;
  width: 100px;
  height: 100px;
}

.positioned {
  position: absolute;
  background: green;
  position-anchor: --a;
  width: 100px;
  height: 100px;
  justify-self: anchor-center;
  align-self: anchor-center;
}

.dn {
  display: none;
}
</style>
<p>Test passes if there is a filled green square and <strong>no red</strong>.</p>
<div class=abs-cb>
  <div id=s class=scroller>
    <div class=content>
      <div class=anchor></div>
    </div>
  </div>
  <div id=d class="positioned dn"></div>
</div>
<script>
function raf() {
  return new Promise(resolve => requestAnimationFrame(resolve));
}

async function run() {
  await raf();
  await raf();
  s.scrollLeft = 100;
  s.scrollTop = 100;
  d.classList.toggle('dn');

  document.documentElement.classList.remove('reftest-wait');
}
run();
</script>
</html>
