<!DOCTYPE html>
<link rel="author" title="Squarespace" href="https://www.squarespace.com/">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<style>
  .below-viewport {
    position: absolute;
    top: 1000vh;
  }
</style>

<video id="below_viewport" class="below-viewport" src="/media/A4.mp4?pipe=trickle(d2)" loading="eager"></video>

<script>
  const belowViewportVideo = document.getElementById("below_viewport");
  let dataLoaded = false;

  async_test(t => {
    belowViewportVideo.addEventListener("loadeddata", t.step_func(() => {
      dataLoaded = true;
      t.done();
    }));

    //if data is not loaded after 5 seconds, assert unreached
    t.step_timeout(() => {
      assert_unreached("Eager video should load data immediately");
    }, 5000);
  }, "Videos with loading='eager' load immediately regardless of viewport position");
</script>
